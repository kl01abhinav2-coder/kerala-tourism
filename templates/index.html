{% extends 'base.html' %}
{% block content %}

<style>
    /* 1. Base Theme & Colors */
    :root {
        --bg-black: #050505;
        --text-white: #ffffff;
        --accent: #ffffff;
        --gray: #888;
    }

    body {
        background-color: var(--bg-black);
        color: var(--text-white);
        margin: 0;
        font-family: 'Poppins', sans-serif;
    }

    /* 2. Hero Section - The "ALIVE" Look */
    .hero-container {
        height: 75vh;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), 
                    url('https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?q=80&w=1920') center/cover no-repeat;
    }

    .hero-text {
        font-size: 15vw;
        font-weight: 900;
        letter-spacing: 0.4em;
        text-indent: 0.4em; /* Centers text despite letter spacing */
        opacity: 0.9;
        margin: 0;
    }

    /* 3. Split Content Section */
    .content-wrapper {
        display: flex;
        padding: 80px 5% 100px 8%;
        gap: 40px;
        align-items: flex-start;
    }

    /* Left Side: Description */
    .info-panel {
        flex: 0 0 35%;
        position: sticky;
        top: 100px;
    }

    .info-panel h2 {
        font-size: 3rem;
        margin: 0;
        font-weight: 700;
    }

    .divider {
        width: 80px;
        height: 4px;
        background: var(--text-white);
        margin: 20px 0 30px 0;
    }

    .info-panel p {
        color: var(--gray);
        line-height: 1.8;
        font-size: 1rem;
        margin-bottom: 40px;
    }

    .btn-learn {
        padding: 12px 35px;
        border: 1px solid var(--text-white);
        color: var(--text-white);
        text-decoration: none;
        border-radius: 30px;
        transition: 0.3s;
        text-transform: uppercase;
        font-size: 0.8rem;
        letter-spacing: 1px;
    }

    .btn-learn:hover {
        background: var(--text-white);
        color: var(--bg-black);
    }

    /* Right Side: Destination Slider */
    .slider-panel {
        flex: 1;
        overflow: hidden; /* Clips the overflow */
        position: relative;
    }

    .card-strip {
        display: flex;
        gap: 25px;
        overflow-x: scroll;
        scroll-behavior: smooth;
        scrollbar-width: none; /* Firefox */
        padding-bottom: 20px;
    }

    .card-strip::-webkit-scrollbar {
        display: none; /* Chrome/Safari */
    }

    .destination-card {
        min-width: 280px;
        height: 400px;
        border-radius: 20px;
        position: relative;
        overflow: hidden;
        transition: transform 0.4s ease;
        border: 1px solid rgba(255,255,255,0.1);
    }

    .destination-card img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .card-overlay {
        position: absolute;
        bottom: 0;
        width: 100%;
        padding: 25px;
        background: linear-gradient(transparent, rgba(0,0,0,0.9));
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-sizing: border-box;
    }

    .card-overlay h4 {
        margin: 0;
        font-weight: 400;
        font-size: 1.1rem;
    }

    /* Booking Button */
    .btn-book-icon {
        width: 40px;
        height: 40px;
        background: #fff;
        color: #000;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        text-decoration: none;
        font-weight: bold;
        font-size: 1.2rem;
        transition: 0.3s;
    }

    .btn-book-icon:hover {
        transform: scale(1.1);
        background: #eee;
    }

    /* Slider Controls */
    .slider-nav {
        display: flex;
        gap: 15px;
        margin-top: 30px;
        justify-content: flex-end;
    }

    .nav-dot {
        width: 10px;
        height: 10px;
        background: #333;
        border-radius: 50%;
        cursor: pointer;
        transition: 0.3s;
    }

    .nav-dot.active {
        background: #fff;
        width: 30px;
        border-radius: 10px;
    }
</style>

<section class="hero-container">
    <h1 class="hero-text">ALIVE</h1>
</section>

<div class="content-wrapper">
    <div class="info-panel">
        <h2>Kerala Tourism</h2>
        <div class="divider"></div>
        <p>
            Experience the majestic landscapes of Kerala. From the misty mountains 
            to the golden shores, our 10 selected destinations offer a journey 
            that makes you feel truly alive.
        </p>
        <a href="#" class="btn-learn">Learn More</a>
    </div>

    <div class="slider-panel">
        <div class="card-strip" id="cardStrip">
            {% for dest in destinations %}
            <div class="destination-card">
                {% if dest.image %}
                    <img src="{{ dest.image.url }}" alt="{{ dest.name }}">
                {% else %}
                    <img src="https://via.placeholder.com/300x400" alt="No image">
                {% endif %}
                
                <div class="card-overlay">
                    <h4>{{ dest.name }}</h4>
                    <a href="{% url 'book_now' dest.id %}" class="btn-book-icon" title="Book Now">+</a>
                </div>
            </div>
            {% empty %}
                <p>No destinations found.</p>
            {% endfor %}
        </div>

        <div class="slider-nav">
            <span class="nav-dot active" onclick="scrollToIndex(0)"></span>
            <span class="nav-dot" onclick="scrollToIndex(1)"></span>
            <span class="nav-dot" onclick="scrollToIndex(2)"></span>
        </div>
    </div>
</div>

<script>
    const strip = document.getElementById('cardStrip');
    const dots = document.querySelectorAll('.nav-dot');

    function scrollToIndex(index) {
        // Calculate scroll position (width of cards + gap)
        const scrollAmount = index * 600; 
        strip.scrollTo({
            left: scrollAmount,
            behavior: 'smooth'
        });

        // Update dots
        dots.forEach(dot => dot.classList.remove('active'));
        dots[index].classList.add('active');
    }

    // Optional: Auto-update dots on manual scroll
    strip.addEventListener('scroll', () => {
        const index = Math.round(strip.scrollLeft / 600);
        dots.forEach(dot => dot.classList.remove('active'));
        if(dots[index]) dots[index].classList.add('active');
    });
</script>

{% endblock %}